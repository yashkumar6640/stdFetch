(function() {
  window.stdFetch = {
    request: function(c, d) {
      if ("json" === d.dataType) return fetch(c, d).then(e => e.json());
      return "blob" === d.dataType
        ? fetch(c, d).then(e => e.blob())
        : "text" === d.dataType
          ? fetch(c, d).then(e => e.text())
          : "formData" === d.dataType
            ? fetch(c, d).then(e => e.formData())
            : void 0;
    },
    get: function(c, d = { dataType: "json" }) {
      return this.request(c, d);
    },
    post: function(c, d = { dataType: "json" }) {
      return (
        (d.method = "POST"),
        d.dataType || (d.dataType = "json"),
        d.body && (d.body = JSON.stringify(d.body)),
        this.request(c, d)
      );
    },
    put: function(c, d = {}) {
      return (
        (d.method = "PUT"),
        d.dataType || (d.dataType = "json"),
        d.body && (d.body = JSON.stringify(d.body)),
        this.request(c, d)
      );
    },
    patch: function(c, d = {}) {
      return (
        (d.method = "PATCH"),
        d.dataType || (d.dataType = "json"),
        d.body && (d.body = JSON.stringify(d.body)),
        this.request(c, d)
      );
    },
    delete: function(c, d = {}) {
      return (d.method = "DELETE"), fetch(c, d);
    }
  };
})();
